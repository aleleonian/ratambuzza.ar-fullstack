<h2>Create una postal pixelada</h2>

<form <%- hasPending ? "class='disabled'" :"" %> hx-post="/trips/<%= currentOrUpcomingTrip.slug %>/postcards/new"
    hx-target="#form-container" hx-swap="innerHTML">
    <!-- AVATAR ROW -->
    <div class="multi-avatar-picker">
        <label for="avatar-select">Elegí hasta 3 avatares:</label>
        <select id="avatar-select" multiple size="5" style="width: 100%; max-width: 400px;">
            <% avatars.forEach(a => { %>
            <option <% if(typeof selectedAvatars != "undefined" && selectedAvatars.includes(a.handle)) {%> selected
                <% } %> value="<%= a.handle %>"><%= a.handle %>
            </option>
            <% }) %>
        </select>
        <input type="hidden" name="avatars" id="selected-avatars-input" />
    </div>

    <!-- LOCATION + ACTION ROW -->
    <div class="form-row">
        <div>
            <label for="background-select">Elegí locación:</label>
            <select id="background-select" name="background">
                <% backgrounds.forEach(bg => { %>
                <option <% if(typeof selectedBackground != "undefined" && selectedBackground === bg) {%> selected
                    <% } %> value="<%= bg %>"><%= bg %></option>
                <% }) %>
            </select>
        </div>
        <div>
            <label for="action-select">Elegí una acción:</label>
            <select id="action-select" name="action">
                <% actions.forEach(act => { %>
                <option <% if(typeof selectedAction != "undefined" && selectedAction === act) {%> selected <% } %>
                    value="<%= act %>"><%= act %></option>
                <% }) %>
            </select>
        </div>
    </div>

    <div class="form-row center">
        <button class="button" type="submit">Generar Postal</button>
    </div>
</form>